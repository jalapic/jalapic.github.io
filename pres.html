<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<meta charset="utf-8">
<meta name="author" content="Taylor, Molly &amp; Megha">
<link href="libs/remark-css-0.0.1/default.css" rel="stylesheet"><link href="libs/remark-css-0.0.1/fonts.css" rel="stylesheet">
</head>
<body>
<textarea id="source"> class: center, middle, inverse, title-slide # Student Alcohol Consumption in Portugal ### Taylor, Molly &amp; Megha ### 2017/10/8 --- # Packages ```r library(tidyverse) library(forcats) library(broom) library(knitr) library(kableExtra) ```
 --- # Student alcohol consumption data - Data from 2005-2006 year from two public schools in Portugal - Collected from school reports as well as questionnaires - Contains student grades, demographic information and data on student alcohol consumption --- #
 The data ```r sac_mat &lt;- read_csv(&quot;student-mat.csv&quot;) sac_mat %&gt;% select(sex, Walc, G3) %&gt;% glimpse() ``` ``` ## Observations: 395 ## Variables: 3 ## $ sex &lt;chr&gt; &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;M&quot;, &quot;M&quot;, &quot;F&quot;, &quot;M&quot;, &quot;M&quot;, &quot;F&quot;, &quot;F... ## $ Walc &lt;int&gt; 1, 1, 3, 1, 2, 2,
 1, 1, 1, 1, 2, 1, 3, 2, 1, 2, 2, 1, 4, ... ## $ G3 &lt;int&gt; 6, 6, 10, 15, 10, 15, 11, 6, 19, 15, 9, 12, 14, 11, 16, 1... ``` --- # Check ```r table(sac_mat$G3, useNA = &quot;ifany&quot;) ``` ``` ## ## 0 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 ## 38 1 7 15 9 32 28
 56 47 31 31 27 33 16 6 12 5 1 ``` ```r table(sac_mat$sex, useNA = &quot;ifany&quot;) ``` ``` ## ## F M ## 208 187 ``` ```r table(sac_mat$Walc, useNA = &quot;ifany&quot;) ``` ``` ## ## 1 2 3 4 5 ## 151 85 80 51 28 ``` --- # Cleaning ```r sac_mat_clean &lt;- sac_mat %&gt;% filter(G3
 != 0) %&gt;% mutate(sex_f = fct_recode(factor(sex), &quot;Female&quot; = &quot;F&quot;, &quot;Male&quot; = &quot;M&quot;), Walc_f = fct_recode(factor(Walc), &quot;Very Low&quot; = &quot;1&quot;, &quot;Low&quot; = &quot;2&quot;, &quot;Medium&quot; = &quot;3&quot;, &quot;High&quot; = &quot;4&quot;, &quot;Very High&quot; = &quot;5&quot;)) ``` --- # Demographics: Sex ```r sac_mat_clean %&gt;% count(sex_f)
 %&gt;% mutate(p = prop.table(n)) %&gt;% mutate_if(is.numeric, funs(round(., 3))) %&gt;% select(sex = sex_f, n, proportion = p) %&gt;% kable(format = &quot;html&quot;) %&gt;% kable_styling(c(&quot;striped&quot;, &quot;bordered&quot;), full_width = F) ``` &lt;table class=&quot;table table-striped table-bordered&quot;
 style=&quot;width: auto !important; margin-left: auto; margin-right: auto;&quot;&gt; &lt;thead&gt;&lt;tr&gt; &lt;th style=&quot;text-align:left;&quot;&gt; sex &lt;/th&gt; &lt;th style=&quot;text-align:right;&quot;&gt; n &lt;/th&gt; &lt;th style=&quot;text-align:right;&quot;&gt; proportion &lt;/th&gt; &lt;/tr&gt;&lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left;&quot;&gt;
 Female &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt; 185 &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt; 0.518 &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left;&quot;&gt; Male &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt; 172 &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt; 0.482 &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt;
 --- # Demographics: Age ```r sac_mat_clean %&gt;% summarize(n = n(), mean_age = mean(age), sd_age = sd(age)) %&gt;% mutate_if(is.numeric, funs(round(., 3))) ``` ``` ## # A tibble: 1 x 3 ## n mean_age sd_age ## &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 357 16.655 1.268 ``` --- # Distributions
 of sex by WALC ```r sac_mat_clean %&gt;% group_by(Walc_f, sex_f) %&gt;% summarize(n = n()) %&gt;% mutate(N = sum(n), p = n/N) %&gt;% mutate_if(is.numeric, funs(round(., 3))) %&gt;% select(-n, N, walc = Walc_f, sex = sex_f, p) %&gt;% spread(sex, p) %&gt;% kable(format = &quot;html&quot;)
 %&gt;% kable_styling(c(&quot;striped&quot;, &quot;bordered&quot;), full_width = F) ``` &lt;table class=&quot;table table-striped table-bordered&quot; style=&quot;width: auto !important; margin-left: auto; margin-right: auto;&quot;&gt; &lt;thead&gt;&lt;tr&gt; &lt;th style=&quot;text-align:left;&quot;&gt; walc &lt;/th&gt; &lt;th style=&quot;text-align:right;&quot;&gt;
 N &lt;/th&gt; &lt;th style=&quot;text-align:right;&quot;&gt; Female &lt;/th&gt; &lt;th style=&quot;text-align:right;&quot;&gt; Male &lt;/th&gt; &lt;/tr&gt;&lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left;&quot;&gt; Very Low &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt; 133 &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt; 0.609 &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt;
 0.391 &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left;&quot;&gt; Low &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt; 73 &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt; 0.589 &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt; 0.411 &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left;&quot;&gt; Medium &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt;
 77 &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt; 0.558 &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt; 0.442 &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left;&quot;&gt; High &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt; 48 &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt; 0.292 &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt;
 0.708 &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td style=&quot;text-align:left;&quot;&gt; Very High &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt; 26 &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt; 0.154 &lt;/td&gt; &lt;td style=&quot;text-align:right;&quot;&gt; 0.846 &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; --- # Distributions of sex by WALC ```r
 ggplot(sac_mat_clean, aes(x = Walc_f, fill = sex_f)) &#43; geom_bar(position = &quot;fill&quot;) &#43; ggtitle(&quot;Distributions of Sex by Weekend Alcohol Consumption&quot;) &#43; labs(x = &quot;Weekend Alcohol Consumption&quot;, y = &quot;Proportion&quot;, fill = &quot;Sex&quot;, caption = &quot;Source: Kaggle&quot;) &#43; theme_minimal()
 &#43; scale_fill_brewer(type = &quot;qual&quot;, palette = 6) &#43; theme(plot.title = element_text(hjust = 0.5, size = 20, face = &quot;bold&quot;), plot.caption = element_text(size = 15, face = &quot;italic&quot;), axis.text = element_text(size = 15), axis.title = element_text(size = 15), legend.title=element_text(size=15),
 legend.text=element_text(size=15)) ``` --- ![](new_pres_files/figure-html/unnamed-chunk-11-1.png)&lt;!-- --&gt; --- ## Test of independence ```r tidy(with(sac_mat_clean, chisq.test(Walc_f, sex_f))) %&gt;% select(statistic, p_val = p.value) ``` ``` ## statistic p_val
 ## 1 30.05166 4.777341e-06 ``` --- # Association between WALC and math grades ```r ggplot(sac_mat_clean, aes(x = Walc_f, y = G3, fill = sex_f)) &#43; geom_boxplot() &#43; facet_wrap(~ sex_f) &#43; ggtitle(&quot;Association between Weekend Alcohol Consumption on Math Grades
 by Sex&quot;) &#43; labs(x = &quot;Weekend Alcohol Consumption&quot;, y = &quot;Math Grade&quot;, caption = &quot;Source: Kaggle&quot;) &#43; theme_minimal() &#43; scale_fill_brewer(type = &quot;qual&quot;, palette = 6) &#43; theme(plot.title = element_text(size = 18, face = &quot;bold&quot;), plot.caption = element_text(size
 = 15, face = &quot;italic&quot;), axis.text = element_text(size = 15), axis.title = element_text(size = 15), strip.text = element_text(size = 15), panel.spacing = unit(3, &quot;lines&quot;), legend.position = &quot;none&quot;) ``` --- ![](new_pres_files/figure-html/unnamed-chunk-14-1.png)&lt;!--
 --&gt; --- # Test of interaction- Exploratory Treating Walc as categorical. Cannot infer causality! ```r model_cat &lt;- lm(G3 ~ Walc_f * sex_f, data = sac_mat_clean) anova(model_cat) ``` ``` ## Analysis of Variance Table ## ## Response: G3 ## Df Sum Sq Mean Sq
 F value Pr(&gt;F) ## Walc_f 4 155.5 38.875 4.1021 0.002916 ** ## sex_f 1 90.5 90.505 9.5501 0.002161 ** ## Walc_f:sex_f 4 174.6 43.643 4.6052 0.001234 ** ## Residuals 347 3288.5 9.477 ## --- ## Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 ```
 --- class: center, middle # Thanks! </textarea>
</body>
</html>
